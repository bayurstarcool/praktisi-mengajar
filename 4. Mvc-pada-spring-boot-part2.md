# Materi Lanjutan - Studi Kasus Pendaftaran Mahasiswa Baru dengan Java Spring Boot, Thymeleaf, dan Bootstrap (Tanpa Database)

---

### Struktur Direktori
Berikut adalah struktur direktori proyek yang akan buat:

```
src/main/java/com/example/belajar_spring
    ├── controller
    ├── model
    ├── service
    └── BelajarSpringApplication.java
src/main/resources/
    ├── templates/
    │   ├── layout/
    │   │   ├── base.html
    │   │   ├── header.html
    │   │   └── footer.html
    │   ├── mahasiswa/
    │   │   ├── index.html
    │   │   └── add.html
    │   └── jurusan/
    │       ├── index.html
    │       └── add.html
    ├── static/
    │   ├── css/
    │   └── js/
    └── application.properties
```

---

## 2. Implementasi

### 2.1. Membuat Model
Model adalah representasi dari entitas data.

#### Model Mahasiswa
```java name=src/main/java/com/example/belajar_spring/model/Mahasiswa.java
package com.example.belajar_spring.model;

public class Mahasiswa {
    private Long id;
    private String nama;
    private String email;
    private String jurusan;

    public Mahasiswa() {}

    public Mahasiswa(Long id, String nama, String email, String jurusan) {
        this.id = id;
        this.nama = nama;
        this.email = email;
        this.jurusan = jurusan;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getNama() {
        return nama;
    }

    public void setNama(String nama) {
        this.nama = nama;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getJurusan() {
        return jurusan;
    }

    public void setJurusan(String jurusan) {
        this.jurusan = jurusan;
    }
}
```

#### Model Jurusan
```java name=src/main/java/com/example/belajar_spring/model/Jurusan.java
package com.example.belajar_spring.model;

public class Jurusan {
    private Long id;
    private String namaJurusan;

    public Jurusan() {}

    public Jurusan(Long id, String namaJurusan) {
        this.id = id;
        this.namaJurusan = namaJurusan;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getNamaJurusan() {
        return namaJurusan;
    }

    public void setNamaJurusan(String namaJurusan) {
        this.namaJurusan = namaJurusan;
    }
}
```

---

### 2.2. Membuat Service
Service digunakan untuk mengelola logika bisnis. Data disimpan dalam variabel list di memory.

#### Service Mahasiswa
```java name=src/main/java/com/example/belajar_spring/service/MahasiswaService.java
package com.example.belajar_spring.service;

import com.example.belajar_spring.model.Mahasiswa;
import org.springframework.stereotype.Service;

import java.util.ArrayList;
import java.util.List;
import java.util.Optional;

@Service
public class MahasiswaService {
    private final List<Mahasiswa> mahasiswaList = new ArrayList<>();
    private Long idCounter = 1L;

    public List<Mahasiswa> getAllMahasiswa() {
        return mahasiswaList;
    }

    public Mahasiswa saveMahasiswa(Mahasiswa mahasiswa) {
        if (mahasiswa.getId() == null) {
            mahasiswa.setId(idCounter++);
            mahasiswaList.add(mahasiswa);
        } else {
            deleteMahasiswa(mahasiswa.getId());
            mahasiswaList.add(mahasiswa);
        }
        return mahasiswa;
    }

    public void deleteMahasiswa(Long id) {
        mahasiswaList.removeIf(mahasiswa -> mahasiswa.getId().equals(id));
    }

    public Optional<Mahasiswa> findMahasiswaById(Long id) {
        return mahasiswaList.stream().filter(m -> m.getId().equals(id)).findFirst();
    }
}
```

#### Service Jurusan
```java name=src/main/java/com/example/belajar_spring/service/JurusanService.java
package com.example.belajar_spring.service;

import com.example.belajar_spring.model.Jurusan;
import org.springframework.stereotype.Service;

import java.util.ArrayList;
import java.util.List;

@Service
public class JurusanService {
    private final List<Jurusan> jurusanList = new ArrayList<>();
    private Long idCounter = 1L;

    public List<Jurusan> getAllJurusan() {
        return jurusanList;
    }

    public Jurusan saveJurusan(Jurusan jurusan) {
        if (jurusan.getId() == null) {
            jurusan.setId(idCounter++);
            jurusanList.add(jurusan);
        }
        return jurusan;
    }
}
```

---

### 2.3. Membuat Controller
Controller menghubungkan service dengan view.

#### Controller Mahasiswa
```java name=src/main/java/com/example/belajar_spring/controller/MahasiswaController.java
package com.example.belajar_spring.controller;

import com.example.belajar_spring.model.Mahasiswa;
import com.example.belajar_spring.service.JurusanService;
import com.example.belajar_spring.service.MahasiswaService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;

@Controller
@RequestMapping("/mahasiswa")
public class MahasiswaController {
    @Autowired
    private MahasiswaService mahasiswaService;

    @Autowired
    private JurusanService jurusanService;

    @GetMapping
    public String listMahasiswa(Model model) {
        model.addAttribute("mahasiswaList", mahasiswaService.getAllMahasiswa());
        return "mahasiswa/index";
    }

    @GetMapping("/add")
    public String addMahasiswaForm(Model model) {
        model.addAttribute("mahasiswa", new Mahasiswa());
        model.addAttribute("jurusanList", jurusanService.getAllJurusan());
        return "mahasiswa/add";
    }

    @PostMapping("/add")
    public String saveMahasiswa(@ModelAttribute Mahasiswa mahasiswa) {
        mahasiswaService.saveMahasiswa(mahasiswa);
        return "redirect:/mahasiswa";
    }

    @GetMapping("/delete/{id}")
    public String deleteMahasiswa(@PathVariable Long id) {
        mahasiswaService.deleteMahasiswa(id);
        return "redirect:/mahasiswa";
    }
}
```

#### Controller Jurusan
```java name=src/main/java/com/example/belajar_spring/controller/JurusanController.java
package com.example.belajar_spring.controller;

import com.example.belajar_spring.model.Jurusan;
import com.example.belajar_spring.service.JurusanService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;

@Controller
@RequestMapping("/jurusan")
public class JurusanController {
    @Autowired
    private JurusanService jurusanService;

    @GetMapping
    public String listJurusan(Model model) {
        model.addAttribute("jurusanList", jurusanService.getAllJurusan());
        return "jurusan/index";
    }

    @GetMapping("/add")
    public String addJurusanForm(Model model) {
        model.addAttribute("jurusan", new Jurusan());
        return "jurusan/add";
    }

    @PostMapping("/add")
    public String saveJurusan(@ModelAttribute Jurusan jurusan) {
        jurusanService.saveJurusan(jurusan);
        return "redirect:/jurusan";
    }
}
```

---

### 2.4. Membuat Template HTML

#### Layout Base (`base.html`)
```html name=src/main/resources/templates/layout/base.html
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD Mahasiswa</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <div th:replace="layout/header :: header"></div>
        <main>
            <div th:replace="~{::main-content}"></div>
        </main>
        <div th:replace="layout/footer :: footer"></div>
    </div>
</body>
</html>
```

#### Header (`header.html`)
```html name=src/main/resources/templates/layout/header.html
<header>
    <h1 class="text-center">Pendaftaran Mahasiswa Baru</h1>
    <nav>
        <a href="/mahasiswa" class="btn btn-primary">Mahasiswa</a>
        <a href="/jurusan" class="btn btn-secondary">Jurusan</a>
    </nav>
</header>
```

#### Footer (`footer.html`)
```html name=src/main/resources/templates/layout/footer.html
<footer class="text-center mt-4">
    <p>&copy; 2025 Pendaftaran Mahasiswa Baru. All Rights Reserved.</p>
</footer>
```

#### Daftar Mahasiswa (`index.html`)
```html name=src/main/resources/templates/mahasiswa/index.html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="layout/base :: main-content">
<body>
    <h2>Daftar Mahasiswa</h2>
    <a href="/mahasiswa/add" class="btn btn-success">Tambah Mahasiswa</a>
    <table class="table mt-3">
        <thead>
            <tr>
                <th>Nama</th>
                <th>Email</th>
                <th>Jurusan</th>
                <th>Aksi</th>
            </tr>
        </thead>
        <tbody>
        <tr th:each="mahasiswa : ${mahasiswaList}">
            <td th:text="${mahasiswa.nama}"></td>
            <td th:text="${mahasiswa.email}"></td>
            <td th:text="${mahasiswa.jurusan}"></td>
            <td>
                <a th:href="@{/mahasiswa/delete/{id}(id=${mahasiswa.id})}" class="btn btn-danger">Hapus</a>
            </td>
        </tr>
        </tbody>
    </table>
</body>
</html>
```

#### Form Tambah Mahasiswa (`add.html`)
```html name=src/main/resources/templates/mahasiswa/add.html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="layout/base :: main-content">
<body>
    <h2>Tambah Mahasiswa</h2>
    <form th:action="@{/mahasiswa/add}" method="post">
        <div class="form-group">
            <label for="nama">Nama</label>
            <input id="nama" name="nama" type="text" class="form-control">
        </div>
        <div class="form-group">
            <label for="email">Email</label>
            <input id="email" name="email" type="email" class="form-control">
        </div>
        <div class="form-group">
            <label for="jurusan">Jurusan</label>
            <select id="jurusan" name="jurusan" class="form-control">
                <option th:each="jurusan : ${jurusanList}" th:value="${jurusan.namaJurusan}" th:text="${jurusan.namaJurusan}"></option>
            </select>
        </div>
        <button type="submit" class="btn btn-primary mt-2">Simpan</button>
    </form>
</body>
</html>
```

---

## 3. Menjalankan Aplikasi
1. Jalankan aplikasi dengan:
   ```bash
   mvn spring-boot:run
   ```
2. Akses di `http://localhost:8080`.

---

## 4. Kesimpulan
Dengan tutorial ini, Anda telah berhasil membuat aplikasi CRUD Mahasiswa Baru menggunakan Java Spring Boot, Thymeleaf, dan Bootstrap tanpa menggunakan database.